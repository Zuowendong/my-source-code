<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Vue</title>
	</head>
	<body>
		<div id="app" style="color: red; font-size: 20px">
			Vue {{msg}} {{ arr }} {{ list }}
			<h2 class="title">World</h2>
		</div>

		<script src="./dist/vue.js"></script>
		<script>
			Vue.Mixin({
				created: function a() {
					// console.log("a-----全局的先调用");
				},
			});
			Vue.Mixin({
				created: function b() {
					// console.log("b-----全局的先调用");
				},
			});

			let vm = new Vue({
				el: "#app",
				// data: {},
				data() {
					// console.log(this); // 没有call -> 指向 Window
					return {
						msg: "Hello",
						// info: { name: "jack" },
						list: [1, 2, 3, 4],
						arr: [{ name: "jack" }, { name: "tom" }], // name 未劫持
					};
				},
				created() {
					// console.log("调用生命周期函数");
				},
				updated() {
					console.log("updated");
				},
				watch: {
					msg(newVal) {
						console.log(newVal);
					},
				},
			});

			setTimeout(() => {
				// 数据更新多次，只需要vm._update(vm._render())执行一次   ->  批量处理（vue 异步， 数据更新之后不会马上执行）
				vm.arr.push({ name: "lucy" });
				vm.list.unshift(100);
				vm.msg = "Hi";
				// vm._update(vm._render()); // 需要自动更新视图

				vm.$nextTick(() => {
					// console.log("用户自定义nextTick");
				});
			}, 1000);
			console.log(vm);
		</script>
	</body>
</html>
